---
title: Middleware
description: Using pageview tracking in Next.js Edge Middleware
---

s
<Tabs items={['Next.js 14 or later', 'Next.js 13']}>
<Tab>

```ts title="middleware.ts"
import { NextRequest, NextFetchEvent, NextResponse } from "next/server";
import { trackPageview } from "@simpleanalytics/next/server";

export function middleware(request: NextRequest, event: NextFetchEvent) {
  event.waitUntil(trackPageview({ request }));

  return NextResponse.next();
}
```

</Tab>

<Tab>

```ts title="middleware.ts"
import { NextRequest, NextResponse } from "next/server";
import { trackPageview } from "@simpleanalytics/next/server";

export async function middleware(request: NextRequest) {
  await trackPageview({ request });

  return NextResponse.next();
}
```

</Tab>

</Tabs>