---
title: Server Actions
description: Using event tracking in Server Actions
---

<Tabs items={['Next.js 15.1 or later', 'Next.js 15.0', 'Next.js 14 and earlier']}>
<Tab>

```ts title="example-action.ts"
"use server";

import { after } from "next/server";
import { headers } from "next/headers";
import { trackEvent } from "@simpleanalytics/next/server";

export async function exampleAction() {
  // Add your logic here...

  after(async () => {
    await trackEvent("event_in_example_action", {
      // When running on Vercel passing the headers is not necessary.
      headers: await headers(),
    });
  });

  return { success: true };
}
```

</Tab>

<Tab>

```ts title="example-action.ts"
"use server";

import { unstable_after as after } from "next/server";
import { headers } from "next/headers";
import { trackEvent } from "@simpleanalytics/next/server";

export async function exampleAction() {
  // Add your logic here...

  after(async () => {
    await trackEvent("event_in_example_action", {
      // When running on Vercel passing the headers is not necessary.
      headers: await headers(),
    });
  });

  return { success: true };
}
```

</Tab>

<Tab>

```ts title="example-action.ts"
"use server";

import { headers } from "next/headers";
import { waitUntil } from "@vercel/functions";
import { trackEvent } from "@simpleanalytics/next/server";

export async function exampleAction() {
  // Add your logic here...

  waitUntil(
    trackEvent("event_in_example_action", {
      headers: headers(),
    })
  );

  // or call trackEvent directly when you aren't using Vercel
  // trackEvent("event_in_example_action", {
  //  headers: headers(),
  // });

  return { success: true };
}
```

</Tab>

</Tabs>